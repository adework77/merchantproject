<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Creditswitch Merchant Portal | Manage Data Plan</title>
        <link rel="stylesheet" href="../styles/output.css" />
        <link rel="apple-touch-icon" sizes="180x180" href="../assets/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="../assets/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="../assets/favicon-16x16.png">
        <link rel="manifest" href="../assets/site.webmanifest">
    </head>
    <body class="select-none bg-primary-sidebar-gray-background font-roboto">

        <section class="relative flex h-screen" x-data="menu('Manage Data Plans')">

            <!-- Sidebar Component -->
            <div id="sidebarContainer" x-ref="sidebarContainer"></div>
            

            <!-- Right Hand Section -->
            <div class="flex-1 overflow-y-auto flex flex-col min-h-screen" id="screenTop"> 

                <!-- Mobile Nav Component  -->
                <div id="mobileNavContainer" x-ref="mobileNavContainer"></div>

                <!-- Header Section Component  -->
                <div id="contentHeaderContainer" x-ref="contentHeaderContainer"></div>

                <!-- Main Content Section -->
                <div class="mt-2 w-full flex flex-col px-6 py-6 gap-12 text-primary-black">

                    <!-- First Row -->
                    <div class="flex flex-col gap-12 w-full">
                        
                        <div class="flex-1 relative px-4 pt-20 sm:pt-15 pb-3 bg-white shadow-md rounded-xs shrink-0 w-full">
                            <div class="absolute font-medium gap-2 -top-5 px-6 py-4.5 text-left rounded-sm cyanBlue-custom-box-shadow cyanBlue-custom-background-gradient text-white">
                                Create Data Plan Â» <span class="text-sm">Click <img src="" alt=" " class="inline-block"> to add new rows</span>
                            </div>

                            <div class="w-full mb-0.5 flex justify-end items-end">
                                <button class="uppercase font-semibold text-tiny text-white bg-primary-cyanBlue-button-background hover:bg-primary-cyanBlue-background-dark active:bg-primary-blue-text py-3 px-8 rounded-xs cursor-pointer transition duration-300">View Activity Log</button>
                            </div>

                            <div class="w-full mb-16 relative">
                                    <form class="w-full px-4" x-data="{
                                        dataRows: [
                                            {
                                                serviceId: '',
                                                amount: '',
                                                validity: '',
                                                dataBundle: '',
                                                productId: '',
                                                providerId: ''
                                            },
                                        ],
                                        addRow() {
                                            this.dataRows = [...this.dataRows, {
                                                serviceId: '',
                                                amount: '',
                                                validity: '',
                                                dataBundle: '',
                                                productId: '',
                                                providerId: ''
                                            }];
                                        }
                                    }" @submit.prevent>
                                        <div class="overflow-x-auto mb-7 max-w-full">
                                            <div class="min-w-fit">
                                                <table class="w-full table-auto border-collapse text-small">
                                                    <thead class="text-black font-medium align-bottom">
                                                        <tr>
                                                            <td class="px-2 py-3">#</td>
                                                            <td class="px-2 py-3">Service Id</td>
                                                            <td class="px-2 py-3">Amount</td>
                                                            <td class="px-2 py-3">Validity</td>
                                                            <td class="px-2 py-3">Data Bundle</td>
                                                            <td class="px-2 py-3">Product Id</td>
                                                            <td class="px-2 py-3">Provider Id</td>
                                                        </tr>
                                                    </thead>
                                                    <tbody class="align-top">
                                                        <template x-for="(row, index) in dataRows" :key="index">
                                                            <tr class="hover:bg-gray-50 border-t border-primary-sidebar-gray-text/70">
                                                                <td class="p-2 font-bold" x-text="(index + 1) + '.'"></td>
                                                                <td class="p-2">
                                                                    <select 
                                                                        x-model="dataRows[index].serviceId" 
                                                                        :name="`serviceId-${index}`" 
                                                                        :id="`serviceId-${index}`" 
                                                                        class="w-full bg-white text-primary-input-gray-text focus-visible:text-primary-input-black-text border border-primary-sidebar-gray-text focus:border-primary-inputBorder-blue placeholder:font-normal placeholder:text-primary-footer-gray-text outline-none px-3 py-2 text-sm transition duration-300 min-w-[100px]" 
                                                                        required
                                                                    >
                                                                        <option value="">SELECT NETWORK</option>
                                                                        <option value="airtel">AIRTEL</option>
                                                                        <option value="9mobile">9MOBILE</option>
                                                                        <option value="glo">GLO</option>
                                                                        <option value="mtn">MTN</option>
                                                                        <option value="smile">SMILE</option>
                                                                    </select>
                                                                </td>
                                                                <td class="p-2">
                                                                    <input
                                                                        type="number"
                                                                        x-model="dataRows[index].amount" 
                                                                        placeholder="ENTER AMOUNT"
                                                                        :name="`amount-${index}`"
                                                                        :id="`amount-${index}`"
                                                                        required
                                                                        class="w-full bg-white text-primary-input-black-text border border-primary-sidebar-gray-text focus:border-primary-inputBorder-blue placeholder:font-normal placeholder:text-primary-input-gray-text outline-none px-3 py-2 text-sm transition duration-300 min-w-[100px]"
                                                                    >
                                                                </td>
                                                                <td class="p-2">
                                                                    <input
                                                                        type="text"
                                                                        x-model="dataRows[index].validity" 
                                                                        placeholder="ENTER VALIDITY"
                                                                        :name="`validity-${index}`"
                                                                        :id="`validity-${index}`"
                                                                        required
                                                                        class="w-full bg-white text-primary-input-black-text border border-primary-sidebar-gray-text focus:border-primary-inputBorder-blue placeholder:font-normal placeholder:text-primary-input-gray-text outline-none px-3 py-2 text-sm transition duration-300 min-w-[100px]"
                                                                    >
                                                                </td>
                                                                <td class="p-2">
                                                                    <input
                                                                        type="text"
                                                                        x-model="dataRows[index].dataBundle" 
                                                                        placeholder="ENTER DATA BUNDLE"
                                                                        :name="`dataBundle-${index}`"
                                                                        :id="`dataBundle-${index}`"
                                                                        required
                                                                        class="w-full bg-white text-primary-input-black-text border border-primary-sidebar-gray-text focus:border-primary-inputBorder-blue placeholder:font-normal placeholder:text-primary-input-gray-text outline-none px-3 py-2 text-sm transition duration-300 min-w-[100px]"
                                                                    >
                                                                </td>
                                                                <td class="p-2">
                                                                    <input
                                                                        type="text"
                                                                        x-model="dataRows[index].productId"
                                                                        placeholder="ENTER PRODUCT ID"
                                                                        :name="`productId-${index}`"
                                                                        :id="`productId-${index}`"
                                                                        required
                                                                        class="w-full bg-white text-primary-input-black-text border border-primary-sidebar-gray-text focus:border-primary-inputBorder-blue placeholder:font-normal placeholder:text-primary-input-gray-text outline-none px-3 py-2 text-sm transition duration-300 min-w-[100px]"
                                                                    >
                                                                </td>
                                                                <td class="p-2">
                                                                    <input
                                                                        type="text"
                                                                        x-model="dataRows[index].providerId" 
                                                                        placeholder="ENTER PROVIDER ID"
                                                                        :name="`providerId-${index}`"
                                                                        :id="`providerId-${index}`"
                                                                        required
                                                                        class="w-full bg-white text-primary-input-black-text border border-primary-sidebar-gray-text focus:border-primary-inputBorder-blue placeholder:font-normal placeholder:text-primary-input-gray-text outline-none px-3 py-2 text-sm transition duration-300 min-w-[100px]"
                                                                    >
                                                                </td>
                                                                <td class="p-2">
                                                                    <img 
                                                                        src="" 
                                                                        alt=" " 
                                                                        class="cursor-pointer"
                                                                        @click="addRow"
                                                                    >
                                                                </td>
                                                            </tr>
                                                        </template>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="w-full grid grid-cols-3">
                                            <div class="col-span-full md:col-span-1 col-start-1 md:col-start-2">
                                                <button
                                                    type="submit"
                                                    class="w-full uppercase font-semibold text-tiny text-white bg-primary-cyanBlue-button-background hover:bg-primary-cyanBlue-background-dark active:bg-primary-blue-text p-3 rounded-xs cursor-pointer transition duration-300"
                                                >
                                                    Create
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                  
                            </div>  
                        </div>    
                    </div>

                    <!-- Second Row -->
                    <div class="flex flex-col gap-12 w-full">
                        
                        <div class="flex-1 relative px-4 pt-20 sm:pt-15 pb-3 bg-white shadow-md rounded-xs shrink-0 w-full">
                            <div class="absolute font-medium gap-2 -top-5 px-6 py-4.5 text-left rounded-sm cyanBlue-custom-box-shadow cyanBlue-custom-background-gradient text-white">
                                Update Data Plan
                            </div>

                            <div class="w-full mb-16 px-4 relative" x-data="{
                                currentServiceId: '',
                                dataRows: [
                                    {   
                                        uid: '1',
                                        serviceId: 'D01D',
                                        amount: '50',
                                        validity: '1day',
                                        dataBundle: '40MB',
                                        productId: 'AIR-40MB-1',
                                        providerId: '49.99',
                                        status: 'inactive'
                                    },
                                    {   
                                        uid: '2',
                                        serviceId: 'D03D',
                                        amount: '75',
                                        validity: '1day',
                                        dataBundle: '40MB',
                                        productId: 'AIR-40MB-1',
                                        providerId: '49.99',
                                        status: 'inactive'
                                    },
                                    {   
                                        uid: '3',
                                        serviceId: 'D02D',
                                        amount: '50',
                                        validity: '1day',
                                        dataBundle: '40MB',
                                        productId: 'AIR-40MB-1',
                                        providerId: '49.99',
                                        status: 'inactive'
                                    },
                                    {   
                                        uid: '4',
                                        serviceId: 'D01D',
                                        amount: '100',
                                        validity: '5day',
                                        dataBundle: '40MB',
                                        productId: 'AIR-40MB-1',
                                        providerId: '49.99',
                                        status: 'active'
                                    },
                                ],
                                get filteredRows() {
                                    return this.dataRows.filter(row => row.serviceId === this.currentServiceId);
                                },
                                updateRow(row) {
                                    const index = this.dataRows.findIndex(r => r.uid === row.uid);
                                    if (index !== -1) {
                                        this.dataRows[index] = {...row};
                                    } else {
                                        console.error('Row not found');
                                    }
                                },
                                toggleStatus(row) {
                                    const index = this.dataRows.findIndex(r => r.uid === row.uid);
                                    if (index !== -1) {
                                        const currentStatus = this.dataRows[index].status;
                                        this.dataRows[index].status = currentStatus === 'active' ? 'inactive' : 'active';
                                    }
                                }
                            }">             
                                <div class="w-full overflow-x-auto mb-0.5 flex justify-start items-center">
                                    <div @click="currentServiceId = 'D01D'" :class="currentServiceId === 'D01D'? 'bg-[#F4F5F8]': 'hover:bg-[#F4F5F8]'" class="text-primary-filtered-options px-8 py-3 rounded-xs active:text-black font-bold text-xs uppercase cursor-pointer transition duration-200">Airtel</div>
                                    <div @click="currentServiceId = 'D02D'" :class="currentServiceId === 'D02D'? 'bg-[#F4F5F8]': 'hover:bg-[#F4F5F8]'" class="text-primary-filtered-options px-8 py-3 rounded-xs active:text-black font-bold text-xs uppercase cursor-pointer transition duration-200">9Mobile</div>
                                    <div @click="currentServiceId = 'D03D'" :class="currentServiceId === 'D03D'? 'bg-[#F4F5F8]': 'hover:bg-[#F4F5F8]'" class="text-primary-filtered-options px-8 py-3 rounded-xs active:text-black font-bold text-xs uppercase cursor-pointer transition duration-200">Glo</div>
                                    <div @click="currentServiceId = 'D04D'" :class="currentServiceId === 'D04D'? 'bg-[#F4F5F8]': 'hover:bg-[#F4F5F8]'" class="text-primary-filtered-options px-8 py-3 rounded-xs active:text-black font-bold text-xs uppercase cursor-pointer transition duration-200">Mtn</div>
                                    <div @click="currentServiceId = 'D05D'" :class="currentServiceId === 'D05D'? 'bg-[#F4F5F8]': 'hover:bg-[#F4F5F8]'" class="text-primary-filtered-options px-8 py-3 rounded-xs active:text-black font-bold text-xs uppercase cursor-pointer transition duration-200">Smile</div>
                                </div>

                                <div class="overflow-x-auto mb-7 max-w-full">
                                    <div class="min-w-fit">
                                        <table class="w-full table-auto border-collapse text-small">
                                            <thead class="text-black font-medium align-bottom">
                                                <tr class="border-b border-primary-sidebar-gray-text/70">
                                                    <td class="px-2 py-3">#</td>
                                                    <td class="px-2 py-3">Service Id</td>
                                                    <td class="px-2 py-3">Amount</td>
                                                    <td class="px-2 py-3">Validity</td>
                                                    <td class="px-2 py-3">Data Bundle</td>
                                                    <td class="px-2 py-3">Product Id</td>
                                                    <td class="px-2 py-3">Provider Id</td>
                                                </tr>
                                            </thead>
                                            <tbody class="align-top">
                                                <template x-for="(row, index) in filteredRows" :key="index">
                                                    <tr class="hover:bg-gray-50 border-b border-primary-sidebar-gray-text/70">
                                                        <td class="p-2 font-bold" x-text="(index + 1) + '.'"></td>
                                                        <td class="p-2">
                                                            <input
                                                                type="text"
                                                                x-model="row.serviceId"
                                                                placeholder="ENTER SERVICE ID"
                                                                :name="`serviceId-${index}`" 
                                                                :id="`serviceId-${index}`"
                                                                required
                                                                readonly
                                                                class="w-full bg-white text-primary-input-gray-text rounded-sm border-2 border-transparent focus:border-black font-normal placeholder:capitalize outline-none text-sm transition duration-300 min-w-[100px]"
                                                            >
                                                        </td>
                                                        <td class="p-2">
                                                            <input
                                                                type="number"
                                                                x-model="row.amount" 
                                                                placeholder="ENTER AMOUNT"
                                                                :name="`amount-${index}`"
                                                                :id="`amount-${index}`"
                                                                required
                                                                class="w-full bg-white text-primary-input-gray-text rounded-sm border-2 border-transparent focus:border-black font-normal placeholder:capitalize outline-none text-sm transition duration-300 min-w-[100px]"
                                                            >
                                                        </td>
                                                        <td class="p-2">
                                                            <input
                                                                type="text"
                                                                x-model="row.validity" 
                                                                placeholder="ENTER VALIDITY"
                                                                :name="`validity-${index}`"
                                                                :id="`validity-${index}`"
                                                                required
                                                                class="w-full bg-white text-primary-input-gray-text rounded-sm border-2 border-transparent focus:border-black font-normal placeholder:capitalize outline-none text-sm transition duration-300 min-w-[100px]"
                                                            >
                                                        </td>
                                                        <td class="p-2">
                                                            <input
                                                                type="text"
                                                                x-model="row.dataBundle" 
                                                                placeholder="ENTER DATA BUNDLE"
                                                                :name="`dataBundle-${index}`"
                                                                :id="`dataBundle-${index}`"
                                                                required
                                                                class="w-full bg-white text-primary-input-gray-text rounded-sm border-2 border-transparent focus:border-black font-normal placeholder:capitalize outline-none text-sm transition duration-300 min-w-[100px]"
                                                            >
                                                        </td>
                                                        <td class="p-2">
                                                            <input
                                                                type="text"
                                                                x-model="row.productId"
                                                                placeholder="ENTER PRODUCT ID"
                                                                :name="`productId-${index}`"
                                                                :id="`productId-${index}`"
                                                                required
                                                                class="w-full bg-white text-primary-input-gray-text rounded-sm border-2 border-transparent focus:border-black font-normal placeholder:capitalize outline-none text-sm transition duration-300 min-w-[100px]"
                                                            >
                                                        </td>
                                                        <td class="p-2">
                                                            <input
                                                                type="text"
                                                                x-model="row.providerId" 
                                                                placeholder="ENTER PROVIDER ID"
                                                                :name="`providerId-${index}`"
                                                                :id="`providerId-${index}`"
                                                                required
                                                                class="w-full bg-white text-primary-input-gray-text rounded-sm border-2 border-transparent focus:border-black font-normal placeholder:capitalize outline-none text-sm transition duration-300 min-w-[100px]"
                                                            >
                                                        </td>
                                                        <td class="p-2">
                                                                <button
                                                                @click="updateRow(row)"
                                                                class="w-full uppercase text-[10px] text-white bg-primary-cyanBlue-button-background hover:bg-primary-cyanBlue-background-dark active:bg-primary-blue-text py-3 px-7 rounded-xs cursor-pointer transition duration-300"
                                                            >
                                                                Update
                                                            </button>
                                                        </td>
                                                        <td class="p-2">
                                                                <button
                                                                @click="toggleStatus(row)"
                                                                x-text="row.status === 'active'? 'Deactivate': 'Activate'"
                                                                :class="row.status === 'active'? 'bg-primary-cyanBlue-button-background hover:bg-primary-cyanBlue-background-dark active:bg-primary-blue-text': 'bg-primary-danger hover:brightness-95'"
                                                                class="w-full uppercase text-[10px] text-white px-7 py-3 rounded-xs cursor-pointer transition duration-300"
                                                            >
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </template>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>     
                            </div>  
                        </div>
                    </div>
                    
                </div>

                <!-- Footer Section Component  -->
                <div id="contentFooterContainer" x-ref="contentFooterContainer" class="mt-auto"></div>

                <!-- Scroll Up Button  -->
                <div class="fixed bottom-7 right-7 p-2.5 bg-primary-blue-text/30 cursor-pointer" @click="document.getElementById('screenTop').scrollTo({ top: 0, behavior: 'smooth' })">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke="#f5f5f5" class="size-5">
                        <path fill-rule="evenodd" d="M11.47 2.47a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06l-6.22-6.22V21a.75.75 0 0 1-1.5 0V4.81l-6.22 6.22a.75.75 0 1 1-1.06-1.06l7.5-7.5Z" clip-rule="evenodd" />
                    </svg>
                </div>
            </div>

        </section>
    </body>
    <script type="module" src="../scripts/main.js"></script>
</html>